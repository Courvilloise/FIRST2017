// RobotBuilder Version: 2.0
//
// This file was generated by RobotBuilder. It contains sections of
// code that are automatically generated and assigned by robotbuilder.
// These sections will be updated in the future when you export to
// C++ from RobotBuilder. Do not put any code or make any change in
// the blocks indicating autogenerated code or it will be lost on an
// update. Deleting the comments indicating the section will prevent
// it from being updated in the future.




#include "Vehicle.h"
#include "../RobotMap.h"
#include "../Commands/GamePadDrive.h"

// BEGIN AUTOGENERATED CODE, SOURCE=ROBOTBUILDER ID=INCLUDES
// END AUTOGENERATED CODE, SOURCE=ROBOTBUILDER ID=INCLUDES

// BEGIN AUTOGENERATED CODE, SOURCE=ROBOTBUILDER ID=CONSTANTS

    // END AUTOGENERATED CODE, SOURCE=ROBOTBUILDER ID=CONSTANTS

Vehicle::Vehicle() : Subsystem("Vehicle") {
    // BEGIN AUTOGENERATED CODE, SOURCE=ROBOTBUILDER ID=DECLARATIONS
    pMW2LeftEngine = RobotMap::vehiclePMW2LeftEngine;
    pMW0LeftEngine = RobotMap::vehiclePMW0LeftEngine;
    pMW3RightEngine = RobotMap::vehiclePMW3RightEngine;
    pMW1RightEngine = RobotMap::vehiclePMW1RightEngine;

    // END AUTOGENERATED CODE, SOURCE=ROBOTBUILDER ID=DECLARATIONS

    StopAllEngines();
}

void Vehicle::InitDefaultCommand() {
    // Set the default command for a subsystem here.
    // SetDefaultCommand(new MySpecialCommand());
    // BEGIN AUTOGENERATED CODE, SOURCE=ROBOTBUILDER ID=DEFAULT_COMMAND

        SetDefaultCommand(new GamePadDrive());

    // END AUTOGENERATED CODE, SOURCE=ROBOTBUILDER ID=DEFAULT_COMMAND
}

void Vehicle::StopAllEngines()
{
	pMW0LeftEngine->Set(0.0);
	pMW2LeftEngine->Set(0.0);
	pMW3RightEngine->Set(0.0);
	pMW1RightEngine->Set(0.0);
}

void Vehicle::SetDirection(double leftPower, double rightPower)
{
	// Make sure the leftPower is clipped in the supported range by the Vehicle
	if (leftPower > 1.0d)
		leftPower = 1.0d;
	if (leftPower < -1.0d)
		leftPower = -1.0d;

	// Make sure the rightPower is clipped in the supported range by the Vehicle
	if (rightPower > 1.0d)
		rightPower = 1.0d;
	if (rightPower < -1.0d)
		rightPower = -1.0d;

	// The right engines rotates in the opposite side of the left engines
	rightPower = rightPower * -1.0d;

	// Set the power on the first pair engines
	pMW0LeftEngine->Set(leftPower);
	pMW2LeftEngine->Set(leftPower);

	// Set the power on the second pair engines
	pMW1RightEngine->Set(rightPower);
	pMW3RightEngine->Set(rightPower);
}

// Put methods for controlling this subsystem
// here. Call these from Commands.

